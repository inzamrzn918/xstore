<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrintShare - Shop Receiver</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="shop-info">
                <h1>üñ®Ô∏è PrintShare</h1>
                <p class="shop-name" id="shopName">Loading...</p>
            </div>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span id="statusText">Ready to Receive</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Setup Screen (First Time) -->
            <div id="setupScreen" class="setup-screen" style="display: none;">
                <div class="setup-card">
                    <h2>üè™ Shop Setup</h2>
                    <p>Configure your print shop details</p>

                    <div class="form-group">
                        <label>Shop Name</label>
                        <input type="text" id="setupShopName" placeholder="e.g., Quick Print Services" />
                    </div>

                    <div class="form-group">
                        <label>Location (Optional)</label>
                        <input type="text" id="setupLocation" placeholder="e.g., Main Street, Downtown" />
                    </div>

                    <button class="btn btn-primary btn-large" onclick="saveShopSetup()">
                        ‚úÖ Save & Generate QR Code
                    </button>
                </div>
            </div>

            <!-- Main Screen (QR Display) -->
            <div id="mainScreen" class="main-screen">
                <!-- QR Code Section -->
                <div class="qr-section">
                    <h2>üì± Scan to Send Files</h2>
                    <p class="qr-subtitle">Customers scan this QR code to send printable files</p>

                    <div class="qr-display">
                        <div class="qr-container">
                            <canvas id="shopQRCode"></canvas>
                        </div>
                        <div class="qr-info">
                            <div class="info-badge">
                                <span class="badge-icon">üè™</span>
                                <span id="displayShopName">-</span>
                            </div>
                            <div class="info-badge">
                                <span class="badge-icon">üåê</span>
                                <span id="displayShopIP">-</span>
                            </div>
                            <div class="info-badge">
                                <span class="badge-icon">üîë</span>
                                <span id="displayShopID">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="qr-security-notice">
                        <div class="notice-icon">üîí</div>
                        <div class="notice-content">
                            <strong>Secure QR Code</strong>
                            <p>This QR code is protected and should only be scanned with the XStore mobile app. Scanning with other apps will not work.</p>
                        </div>
                    </div>

                    <button class="btn btn-secondary" onclick="showSetup()">
                        ‚öôÔ∏è Change Shop Details
                    </button>
                </div>

                <!-- Incoming Files Section -->
                <div class="incoming-section">
                    <div class="section-header">
                        <h3>üì• Incoming Files</h3>
                        <span class="file-count" id="fileCount">0 files</span>
                    </div>

                    <div id="incomingFiles" class="file-list">
                        <div class="empty-state">
                            <div class="empty-icon">üì≠</div>
                            <p>No files received yet</p>
                            <p class="empty-subtitle">Files will appear here when customers send them</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- File Preview Modal -->
            <div id="filePreviewModal" class="modal" style="display: none;">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="previewFileName">File Preview</h3>
                        <button class="close-btn" onclick="closePreview()">‚úï</button>
                    </div>
                    <div class="modal-body">
                        <div id="previewContent" class="preview-content">
                            <!-- Preview will be inserted here -->
                        </div>
                        <div class="preview-info">
                            <div class="info-row">
                                <span class="label">Size:</span>
                                <span id="previewSize">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">Type:</span>
                                <span id="previewType">-</span>
                            </div>
                            <div class="info-row">
                                <span class="label">From:</span>
                                <span id="previewFrom">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-secondary" onclick="closePreview()">
                            Cancel
                        </button>
                        <button class="btn btn-primary" onclick="acceptFile()">
                            ‚úÖ Accept & Save
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-stats">
                <div class="stat">
                    <span class="stat-value" id="totalFiles">0</span>
                    <span class="stat-label">Total Files</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="totalSize">0 MB</span>
                    <span class="stat-label">Total Size</span>
                </div>
                <div class="stat">
                    <span class="stat-value" id="todayFiles">0</span>
                    <span class="stat-label">Today</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="renderer.js"></script>
</body>

</html>